<!DOCTYPE html>
<html lang="en-gb">

<head>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "TechArticle",
        "headline": "Advent of Code Day 14: Docking Data",
        "datePublished": "2020-12-14",
        "author": {
          "@type": "Person",
          "name": "Joe Pitts",
          "additionalName": "David",
          "affiliation": "University of Lincoln",
          "jobTitle": "Developer",
          "url": "https://JoePitts.co.uk",
          "sameAs": [
            "https://www.facebook.com/Joe.Pittsy",
            "https://www.linkedin.com/in/JoePittsy",
            "https://twitter.com/JoePittsy",
            "https://www.instagram.com/JoePittsy/",
            "https://github.com/JoePittsy"
          ]
        },
        "description": "Day Fourteen of Advent of Code 2020!",
        "image": "https://joepitts.co.uk/resources/images/xmas/14.jpg"
   
      }
    </script>

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JoePittsy" />
    <meta name="twitter:description" content="Docking Data | Advent of Code 2020!" name="description" />
    <meta name="twitter:title" content="Joe Pitts | Advent of Code Day 14" />
    <meta name="twitter:creator" content="@JoePittsy" />
    <meta property="og:image" content="https://joepitts.co.uk/resources/images/xmas/14.jpg" />

    <meta property="og:title" content="Advent of Code Day 14" />
    <meta property="og:description" content="Day Fourteen of Advent of Code 2020!" />
    <meta property="og:url" content="https://joepitts.co.uk/blog/advent-of-code-day-14.html" />
    <meta name="author" content="Joe Pitts" />

    <meta name="twitter:image" content="https://joepitts.co.uk/resources/images/xmas/14.jpg" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-114382787-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag("js", new Date());
        gtag("config", "UA-114382787-2");
    </script>
    <script src="/js/darkMode.js" type="text/javascript"></script>
    <script src="/js/clipboard.min.js"></script>
    <link href="/resources/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" />
    <link href="/resources/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
    <link href="/resources/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
    <link href="/resources/site.webmanifest" rel="manifest" />
    <link href="/resources/safari-pinned-tab.svg" rel="mask-icon" />
    <meta content="#da532c" name="msapplication-TileColor" />
    <meta content="#ffffff" name="theme-color" />
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Joe Pitts | Advent of Code Day 14</title>
    <link href="/style.css" rel="stylesheet" type="text/css" />
    <meta content="Advent of Code Day 14!" name="description" />
    <meta lang="en-gb" />
    <noscript>
        <style>
            .jsonly {
                display: none;
            }
        </style>
    </noscript>
</head>

<body link="black" style="height: auto;">
    <div class="content" id="content">
        <header>
            <div id="containter">
                <div id="header">
                    <img alt="Joe Pitts" id="logo" src="/resources/JoePitts.jpg" title="Joe Pitts" width="10%" />
                    <a href="/" id="title">
                        <p>Joe Pitts</p>
                    </a>
                    <div class="burger" onclick="document.getElementById('drop').click();">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </div>
            </div>
            <aside>
                <nav id="burger">
                    <label class="toggle" for="drop" style="pointer-events: none;"></label>
                    <input id="drop" type="checkbox" />
                    <ul class="menu" id="burger_menu">
                        <li>
                            <a href="/">Home</a>
                        </li>
                        <li>
                            <a href="/blog">Blog</a>
                        </li>
                        <li>
                            <a href="/work.html">My Work</a>
                        </li>
                        <li>
                            <a href="/games/">Games</a>
                        </li>

                        <li>
                            <a href="/instagram.html">Photography</a>
                        </li>
                        <li>
                            <a class="toggleDark" onclick="toggleNightMode();">Dark Mode</a>
                        </li>
                    </ul>
                </nav>
                <nav id="normalMenu">
                    <ul class="menu">
                        <li>
                            <a href="/">Home</a>
                        </li>
                        <li>
                            <a href="/blog">Blog</a>
                        </li>
                        <li>
                            <a href="/work.html">My Work</a>
                        </li>
                        <li>
                            <a href="/games/">Games</a>
                        </li>

                        <li>
                            <a href="/instagram.html">Photography</a>
                        </li>
                        <li>
                            <a class="toggleDark" onclick="toggleNightMode();">Dark Mode</a>
                        </li>
                    </ul>
                </nav>
            </aside>
        </header>
        <hr />
        <div class="blogPost">
            <h1>Advent of Code: Day #14 - Docking Data</h1>
            <span id="readingTime">
                <date>14th of December 2020</date> |
                <p>4 - 5 minutes</p>
            </span>
            <a class="anchor" href="#introduction">
                <h2 id="introduction">Introduction</h2>
            </a>
            <p>
                I really enjoyed todays puzzle! All about Bit Masking and Binary.
            </p>

            <a class="anchor" href="#one">
                <h2 id="one">Task One</h2>
            </a>
            <p>
                Given an list input of either Mask = 36 Bit number OR mem[address] = number run the instructions and
                report the sum of all numbers in memory.
            </p>
            <h3>Reading in the data</h3>
            <p>
                I split the data up and if the item was a new mask I added it to the dataset in the format <tt>["mask",
                    new_mask]</tt>. If it was a memory address I removed the text and added the data in the format
                <tt>[address, data]</tt>.
            </p>

            <div class="codeSnippet">
                <div class="double-val-label">
                    <span class="python">Python</span>
                    <span data-clipboard-target="#getDataIn" id="dataCopy">Copy</span>
                </div>
                <pre><div id="getDataIn" style="color: #383a42; font-family: 'Fira Code', 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback';font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;" spellcheck="false" contenteditable="false"><div><div><span style="color: #a626a4;">def</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">read_data</span><span style="color: #383a42;">(</span><span style="color: #986801;">path</span><span style="color: #383a42;">):</span></div><div><span style="color: #383a42;">    dataset = []</span></div><br><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">with</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">open</span><span style="color: #383a42;">(path) </span><span style="color: #a626a4;">as</span><span style="color: #383a42;"> f:</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> line </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> f.readlines():</span></div><div><span style="color: #383a42;">            tmp = line.strip().split(</span><span style="color: #50a14f;">" = "</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> tmp[</span><span style="color: #986801;">0</span><span style="color: #383a42;">] == </span><span style="color: #50a14f;">"mask"</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">                dataset.append([</span><span style="color: #50a14f;">"mask"</span><span style="color: #383a42;">, </span><span style="color: #0184bc;">list</span><span style="color: #383a42;">(tmp[</span><span style="color: #986801;">1</span><span style="color: #383a42;">])])</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">else</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">                mem_address = </span><span style="color: #0184bc;">int</span><span style="color: #383a42;">(tmp[</span><span style="color: #986801;">0</span><span style="color: #383a42;">][tmp[</span><span style="color: #986801;">0</span><span style="color: #383a42;">].index(</span><span style="color: #50a14f;">"["</span><span style="color: #383a42;">) + </span><span style="color: #986801;">1</span><span style="color: #383a42;">: -</span><span style="color: #986801;">1</span><span style="color: #383a42;">])</span></div><div><span style="color: #383a42;">                dataset.append([mem_address, </span><span style="color: #0184bc;">int</span><span style="color: #383a42;">(tmp[</span><span style="color: #986801;">1</span><span style="color: #383a42;">])])</span></div><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">return</span><span style="color: #383a42;"> dataset</span></div></div></div></pre>
            </div>

            <h3>The Solution</h3>
            <p>
                Solving part one was quite simple. If the current instruction is a mask then we update the mask,
                otherwise we apply the mask to the data and then assign the value to the memory dictionary. To end we
                return the sum of the memory dictionary's values.
            </p>
            <div class="codeSnippet">
                <div class="double-val-label">
                    <span class="python">Python</span>
                    <span data-clipboard-target="#getTaskOne" id="oneCopy">Copy</span>
                </div>
                <pre id="getTaskOne"
                    spellcheck="false"><div style="color: #383a42;font-family: 'Fira Code', 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback';font-weight: normal;font-size: 15px;line-height: 20px;white-space: pre;" spellcheck="false" contenteditable="false"><div><div><span style="color: #a626a4;">def</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">task_one</span><span style="color: #383a42;">(</span><span style="color: #986801;">instructions</span><span style="color: #383a42;">):</span></div><div><span style="color: #383a42;">    memory = {}</span></div><div><span style="color: #383a42;">    current_mask = [</span><span style="color: #50a14f;">"X"</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> _ </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">range</span><span style="color: #383a42;">(</span><span style="color: #986801;">36</span><span style="color: #383a42;">)]</span></div><br><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> current_instruction, data </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> instructions:</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> current_instruction == </span><span style="color: #50a14f;">"mask"</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            current_mask = data</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">else</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            binary = </span><span style="color: #0184bc;">list</span><span style="color: #383a42;">(</span><span style="color: #0184bc;">format</span><span style="color: #383a42;">(data, </span><span style="color: #50a14f;">"036b"</span><span style="color: #383a42;">))</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> index, char </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">enumerate</span><span style="color: #383a42;">(current_mask):</span></div><div><span style="color: #383a42;">                </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> char != </span><span style="color: #50a14f;">"X"</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">                    binary[index] = char</span></div><br><div><span style="color: #383a42;">            memory[current_instruction] = </span><span style="color: #0184bc;">int</span><span style="color: #383a42;">(</span><span style="color: #50a14f;">""</span><span style="color: #383a42;">.join(binary), </span><span style="color: #986801;">2</span><span style="color: #383a42;">)</span></div><br><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">return</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">sum</span><span style="color: #383a42;">(memory.values())</span></div></div></div></pre>
            </div>

            <a class="anchor" href="#two">
                <h2 id="two">Task Two</h2>
            </a>
            <h3>The Solution</h3>
            <p>
                In task two it is reveled that the mask actually applies to the memory address, and instead of
                ignoring X's they now represent 'Floating Bits' that take on every permeation of 0 and 1. I.E if your
                memory address has 2 X's you will end up with 4 new addresses as there are 4 different combination of 0
                and 1 in pairs of 2. (0, 0), (0, 1), (1, 0) and (1, 1). I used the product function from itertools to
                compute all of these permutations then looped through the memory address and updated the values! I'm
                always impressed at what itertools has to offer!
            </p>
            <div class="codeSnippet">
                <div class="double-val-label">
                    <span class="python">Python</span>
                    <span data-clipboard-target="#getTaskTwo" id="twoCopy">Copy</span>
                </div>
            <pre spellcheck="false"
                id="getTaskTwo"><div style="color: #383a42;font-family: 'Fira Code', 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback';font-weight: normal;font-size: 15px;line-height: 20px;white-space: pre; " spellcheck="false" contenteditable="false"><div><div><span style="color: #a626a4;">from</span><span style="color: #383a42;"> itertools </span><span style="color: #a626a4;">import</span><span style="color: #383a42;"> product</span></div><br><div><span style="color: #a626a4;">def</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">task_two</span><span style="color: #383a42;">(</span><span style="color: #986801;">instructions</span><span style="color: #383a42;">):</span></div><div><span style="color: #383a42;">    memory = {}</span></div><div><span style="color: #383a42;">    current_mask = [</span><span style="color: #50a14f;">"X"</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> _ </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">range</span><span style="color: #383a42;">(</span><span style="color: #986801;">36</span><span style="color: #383a42;">)]</span></div><br><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> current_instruction, data </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> instructions:</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> current_instruction == </span><span style="color: #50a14f;">"mask"</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            current_mask = data</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">else</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            </span><span style="color: #a0a1a7;font-style: italic;"># Turn the memory address into binary</span></div><div><span style="color: #383a42;">            binary = </span><span style="color: #0184bc;">list</span><span style="color: #383a42;">(</span><span style="color: #0184bc;">format</span><span style="color: #383a42;">(current_instruction, </span><span style="color: #50a14f;">"036b"</span><span style="color: #383a42;">))</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> index, char </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">enumerate</span><span style="color: #383a42;">(current_mask):</span></div><div><span style="color: #383a42;">                </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> char != </span><span style="color: #50a14f;">"0"</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">                    binary[index] = char</span></div><div><span style="color: #383a42;">            adr = binary</span></div><br><div><span style="color: #383a42;">            </span><span style="color: #a0a1a7;font-style: italic;"># Create all permutations for the floating bits</span></div><div><span style="color: #383a42;">            addresses = []</span></div><div><span style="color: #383a42;">            x_amount = adr.count(</span><span style="color: #50a14f;">"X"</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">            indices = [index </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> index, x </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">enumerate</span><span style="color: #383a42;">(adr) </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> x == </span><span style="color: #50a14f;">"X"</span><span style="color: #383a42;">]</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> combo </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> product(</span><span style="color: #50a14f;">"01"</span><span style="color: #383a42;">, </span><span style="color: #986801;">repeat</span><span style="color: #383a42;">=x_amount):</span></div><div><span style="color: #383a42;">                new_adr = adr</span></div><div><span style="color: #383a42;">                </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> index, c </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">enumerate</span><span style="color: #383a42;">(combo):</span></div><div><span style="color: #383a42;">                    new_adr[indices[index]] = c</span></div><div><span style="color: #383a42;">                addresses.append(</span><span style="color: #0184bc;">int</span><span style="color: #383a42;">(</span><span style="color: #50a14f;">""</span><span style="color: #383a42;">.join(new_adr), </span><span style="color: #986801;">2</span><span style="color: #383a42;">))</span></div><br><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">for</span><span style="color: #383a42;"> address </span><span style="color: #a626a4;">in</span><span style="color: #383a42;"> addresses:</span></div><div><span style="color: #383a42;">                memory[address] = data</span></div><br><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">return</span><span style="color: #383a42;"> </span><span style="color: #0184bc;">sum</span><span style="color: #383a42;">(memory.values())</span></div><br><br></div></div></pre>
                </div>

            <a class="anchor" href="#links">
                <h2 id="links">Links</h2>
            </a>
            <div class="download">
                <p><a href="https://adventofcode.com/2020/leaderboard/private">Leaderboard Code:</a>
                    <small>353270-1fc6ef28</small></p>
            </div>

            <div class="download">
                <p><a href="https://www.github.com/JoePittsy/AdventOfCode/">Github Repository</a>
                    <small>A link to the github repo containing all the days.</small></p>
            </div>
            <div class="download">
                <p><a href="https://raw.githubusercontent.com/JoePittsy/AdventOfCode/main/Day 14/main.py"
                        download>main.py</a>
                    <small>A direct download of the main.py script</small></p>
                <p class="download__instructions">
                    <small class="download__properties">2.2<abbr title="Kilobytes">Kb</abbr></small>
                </p>
            </div>


        </div>
        <p></p>
        <div id="disqus_thread"></div>
        <script>
            (function () {
                // DON'T EDIT BELOW THIS LINEx
                var d = document,
                    s = d.createElement("script");
                s.src = "https://joepitts-co-uk.disqus.com/embed.js";
                s.setAttribute("data-timestamp", +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
        <noscript>Please enable JavaScript to view the
            <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>

    <div class="footer">
        <p align="center">
            <a href="https://linkedin.com/in/JoePittsy">LinkedIn</a>&nbsp;&nbsp;
            <a href="https://twitter.com/JoePittsy">Twitter</a>&nbsp;&nbsp;<a
                href="https://instagram.com/JoePittsy">Instagram</a>&nbsp;&nbsp;<a
                href="https://github.com/JoePittsy">GitHub</a>
        </p>
        <p id="copyright">Copyright Â© 2018-2020 Joe Pitts</p>
    </div>
    <script defer>
        (function () {
            new ClipboardJS("#dataCopy, #oneCopy, #twoCopy, #compCopy");
        })();
    </script>
</body>

</html>