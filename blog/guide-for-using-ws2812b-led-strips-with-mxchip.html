<!DOCTYPE html>
<html lang="en-gb">
  <head>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "TechArticle",
        "headline": "Automatic Display Rotation",
        "datePublished": "2020-06-28T20:18:22.883324"
        "image": "https://JoePittsy.co.uk/resources/JoePitts.jpg",
        "author": {
          "@type": "Person",
          "name": "Joe Pitts",
          "additionalName": "David",
          "affiliation": "University of Lincoln",
          "jobTitle": "Developer",
          "url": "https://JoePitts.co.uk",
          "sameAs": [
            "https://www.facebook.com/Joe.Pittsy",
            "https://www.linkedin.com/in/JoePittsy",
            "https://twitter.com/JoePittsy",
            "https://www.instagram.com/JoePittsy/",
            "https://github.com/Pittsy24"
          ],
          "image": "https://JoePittsy.co.uk/resources/JoePitts.jpg",
          "description": "Joe Pitts, Developer at the University of Lincoln"
        }
      }
    </script>

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JoePittsy" />
    <meta
      name="twitter:description"
      content="Having the display rotate to match the orientation of our device is
    something we all take for granted on our phones and tablets, but for
    some reason, it never made it to our PCs..."
      name="description"
    />
    <meta
      name="twitter:title"
      content="Joe Pitts | Automatic Display Rotation"
    />
    <meta name="twitter:creator" content="@JoePittsy" />
    <meta
      property="og:image"
      content="https://joepitts.co.uk/resources/JoePitts.jpg"
    />

    <meta property="og:title" content="Automatic Display Rotation" />
    <meta
      property="og:description"
      content="Having the display rotate to match the orientation of our device is
    something we all take for granted on our phones and tablets, but for
    some reason, it never made it to our PCs..."
    />
    <meta
      property="og:url"
      content="https://joepitts.co.uk/blog/monitor.html"
    />
    <meta name="author" content="Joe Pitts" />

    <meta
      name="twitter:image"
      content="https://joepitts.co.uk/resources/JoePitts.jpg"
    />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-114382787-2"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-114382787-2");
    </script>
    <script src="/js/darkMode.js" type="text/javascript"></script>
    <script src="/js/clipboard.min.js"></script>
    <link
      href="/resources/apple-touch-icon.png"
      rel="apple-touch-icon"
      sizes="180x180"
    />
    <link
      href="/resources/favicon-32x32.png"
      rel="icon"
      sizes="32x32"
      type="image/png"
    />
    <link
      href="/resources/favicon-16x16.png"
      rel="icon"
      sizes="16x16"
      type="image/png"
    />
    <link href="/resources/site.webmanifest" rel="manifest" />
    <link href="/resources/safari-pinned-tab.svg" rel="mask-icon" />
    <meta content="#da532c" name="msapplication-TileColor" />
    <meta content="#ffffff" name="theme-color" />
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Joe Pitts | Automatic Display Rotation</title>
    <link href="/style.css" rel="stylesheet" type="text/css" />
    <meta
      content="Website of Joe Pitts, a 20 year old Developer and Student of Computer Science at the University of Lincoln UK"
      name="description"
    />
    <meta lang="en-gb" />
  </head>

  <body link="black" style="height: auto;">
    <div class="content" id="content">
      <header>
        <div id="containter">
          <div id="header">
            <img
              alt="Joe Pitts"
              id="logo"
              src="/resources/JoePitts.jpg"
              title="Joe Pitts"
              width="10%"
            />
            <a href="/" id="title">
              <p>Joe Pitts</p>
            </a>
            <div
              class="burger"
              onclick="document.getElementById('drop').click();"
            >
              <div></div>
              <div></div>
              <div></div>
            </div>
          </div>
        </div>
        <aside>
          <nav id="burger">
            <label
              class="toggle"
              for="drop"
              style="pointer-events: none;"
            ></label>
            <input id="drop" type="checkbox" />
            <ul class="menu" id="burger_menu">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/blog">Blog</a>
              </li>
              <li>
                <a href="/work.html">My Work</a>
              </li>
              <li>
                <a href="https://www.linkedin.com/in/joepittsy/">Linkedin</a>
              </li>
              <li>
                <a href="/instagram.html">Photography</a>
              </li>
              <li>
                <a class="toggleDark" onclick="toggleNightMode();">Dark Mode</a>
              </li>
            </ul>
          </nav>
          <nav id="normalMenu">
            <ul class="menu">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/blog">Blog</a>
              </li>
              <li>
                <a href="/work.html">My Work</a>
              </li>
              <li>
                <a href="https://www.linkedin.com/in/joepittsy/">Linkedin</a>
              </li>
              <li>
                <a href="/instagram.html">Photography</a>
              </li>
              <li>
                <a class="toggleDark" onclick="toggleNightMode();">Dark Mode</a>
              </li>
            </ul>
          </nav>
        </aside>
      </header>
      <hr />
      <div class="blogPost">
        <h1>Guide for using WS2812B LED Strips with MXChip</h1>
        <span id="readingTime">
          <date>28th of June 2020</date> |
          <p>6-7 minutes</p>
        </span>
        <a class="anchor" href="#introduction"
          ><h2 id="introduction">Introduction</h2></a
        >
        <p>
          This guide will walk you through how to connect and control a WS2812B
          individually addressable RGB LED strip to the MXChip.
        </p>

        <a class="anchor" href="#materials"
          ><h2 id="materials">Materials</h2></a
        >
        <h3>Breakout Board</h3>
        <p>
          Apart from the LED strip you will also need a breakout board for the
          MXChip so we can access all of the boards pins. The MXChip's
          'connecting finger' is the same as that on the BBC micro:bit which
          allows any breakout boards designed for the micro:bit compatible with
          the MXChip. In this guide i will be using the
          <a href="https://www.amazon.co.uk/gp/product/B06XTP23Z2/"
            >Kitronik edge connector breakout board</a
          >
          but other boards should be very similar, if not the same.
        </p>
        <h3>Jumper Wires</h3>
        <p>
          In order to connect the LED strip to the breakout board we need wires.
          Breadboard jumper wires are inexpensive and come in Male-Male,
          Male-Female and Female-Female, perfect for connecting everything up. I
          got 120 wires for £6 on
          <a
            href="https://www.amazon.co.uk/Elegoo-120pcs-Multicolored-Breadboard-arduino-colorful/dp/B01EV70C78"
            >Amazon.</a
          >
        </p>

        <a class="anchor" href="#wiring"><h2 id="wiring">Wiring</h2></a>

        <p>
          Now that we have all the materials needed its time to wire the LED
          strip up to the breakout board. The LED strip's connector should have
          three wires; Live, Ground and Data. On my LED strip the ground wire is
          coloured white and is on the left, this is followed by a green data
          wire in the middle which leaves a red wire on the right. Wire the Red
          live wire up the 3V output, the white wire to ground (0V) and the data
          wire to any of the data pins.
        </p>
        <picture id="wireImage">
          <!-- <source srcset="/resources/images/mqtt.webp" type="image/webp" /> -->
          <source srcset="/resources/images/wire.jpg" type="image/jpeg" />
          <img src="/resources/images/wire.jpg" />
          <figcaption>It should look like this.</figcaption>
        </picture>
        <h3>Pin Mapping</h3>
        <p>
          As the breakout board we are using was designed for the micro:bit the
          pin numbers on the board and in software do not match up. In the
          bellow tables you can see the mapping from the Kitronik breakout board
          to the numbers that the MXChip will understand.
        </p>

        <div id="tableHolder">
          <table>
            <tr>
              <th>MXChip</th>
              <th>Breakout Board</th>
              <th>Code number</th>
            </tr>
            <tr>
              <td>Reset</td>
              <td>3</td>
              <td>N/A</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>0</td>
              <td>16</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>4</td>
              <td>5</td>
            </tr>
            <tr>
              <td>A Button</td>
              <td>5</td>
              <td>4</td>
            </tr>
            <tr>
              <td>Red LED</td>
              <td>6</td>
              <td>20</td>
            </tr>
            <tr>
              <td>Green LED</td>
              <td>7</td>
              <td>19</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>1</td>
              <td>22</td>
            </tr>
            <tr>
              <td>User LED</td>
              <td>8</td>
              <td>45</td>
            </tr>
            <tr>
              <td>IR LED</td>
              <td>9</td>
              <td>26</td>
            </tr>
            <tr>
              <td>Blue LED</td>
              <td>10</td>
              <td>39</td>
            </tr>
            <tr>
              <td>B Button</td>
              <td>11</td>
              <td>10</td>
            </tr>
          </table>
          <table>
            <tr>
              <th>MXChip</th>
              <th>Breakout Board</th>
              <th>Code number</th>
            </tr>
            <tr>
              <td>WiFi LED</td>
              <td>12</td>
              <td>18</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>2</td>
              <td>23</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>13</td>
              <td>29</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>14</td>
              <td>30</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>15</td>
              <td>31</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>15</td>
              <td>31</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>16</td>
              <td>38</td>
            </tr>
            <tr>
              <td>3.V</td>
              <td>3V</td>
              <td>N/A</td>
            </tr>
            <tr>
              <td>I2C</td>
              <td>19</td>
              <td>24</td>
            </tr>
            <tr>
              <td>I2C</td>
              <td>20</td>
              <td>25</td>
            </tr>
            <tr>
              <td>GND</td>
              <td>0V</td>
              <td>N/A</td>
            </tr>
          </table>
        </div>
        <p></p>
        <h2>The Code</h2>
        <p>
          The first thing you will need is the header and cpp files to drive the
          LED strip. These were written by microsoft and provide some nice
          helper functions and some test routines to light up the LEDs. These
          files can be downloaded at the bottom of this guide in the
          <a href="#files">Files section.</a>
        </p>

        <p>
          Once those files have been downloaded and extracted into your
          workspace we can finally light the LED strip up!.
        </p>
        <div class="codeSnippet">
          <div class="double-val-label">
            <span class="cpp">C++</span>
            <span data-clipboard-target="#getRot" id="rotCopy">Copy</span>
          </div>
          <pre><div id = "getRot" style="color: #383a42;/*! background-color: #fafafa; */font-family: 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback';font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #a626a4;">int</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">getRotation</span><span style="color: #383a42;">()</span></div><div><span style="color: #383a42;">{</span></div><div><span style="color: #383a42;">    </span><span style="color: #e45649;">sensor</span><span style="color: #383a42;">-&gt;</span><span style="color: #4078f2;">enableAccelerator</span><span style="color: #383a42;">();</span></div><div><span style="color: #383a42;">    </span><span style="color: #e45649;">sensor</span><span style="color: #383a42;">-&gt;</span><span style="color: #4078f2;">getXAxes</span><span style="color: #383a42;">(axes);</span></div><br><div><span style="color: #a0a1a7;font-style: italic;">    // If the X axis is between -500 and 500 the device is vertical</span></div><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> (</span><span style="color: #e45649;">axes</span><span style="color: #383a42;">[</span><span style="color: #986801;">0</span><span style="color: #383a42;">] </span><span style="color: #a626a4;">&lt;=</span><span style="color: #383a42;"> </span><span style="color: #986801;">500</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">&amp;&amp;</span><span style="color: #383a42;"> </span><span style="color: #e45649;">axes</span><span style="color: #383a42;">[</span><span style="color: #986801;">0</span><span style="color: #383a42;">] </span><span style="color: #a626a4;">&gt;=</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">-</span><span style="color: #986801;">500</span><span style="color: #383a42;">){</span></div><div><span style="color: #a0a1a7;font-style: italic;">        // If the Y axis is &gt;= 0 then the device is pointed down</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> (</span><span style="color: #e45649;">axes</span><span style="color: #383a42;">[</span><span style="color: #986801;">1</span><span style="color: #383a42;">] </span><span style="color: #a626a4;">&gt;=</span><span style="color: #383a42;"> </span><span style="color: #986801;">0</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">return</span><span style="color: #383a42;"> D_DOWN;</span></div><div><span style="color: #a0a1a7;font-style: italic;">        // Else the device must be pointing upwards</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">else</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">return</span><span style="color: #383a42;"> D_UP;</span></div><div><span style="color: #383a42;">    }</span></div><div><span style="color: #a0a1a7;font-style: italic;">    // If we're not vertical we must be horizontal</span></div><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">else</span><span style="color: #383a42;">{</span></div><div><span style="color: #a0a1a7;font-style: italic;">        // If the X axis is &gt;= 0 the device is on its right side</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> (</span><span style="color: #e45649;">axes</span><span style="color: #383a42;">[</span><span style="color: #986801;">0</span><span style="color: #383a42;">] </span><span style="color: #a626a4;">&gt;=</span><span style="color: #383a42;"> </span><span style="color: #986801;">0</span><span style="color: #383a42;">)</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">return</span><span style="color: #383a42;"> D_RIGHT;</span></div><div><span style="color: #a0a1a7;font-style: italic;">        // Otherwise its on its left</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">else</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">return</span><span style="color: #383a42;"> D_LEFT;</span></div><div><span style="color: #383a42;">    }</span></div><div><span style="color: #383a42;">}</span>       </div></div></pre>
        </div>
        <p>
          I set this script to run at startup and it worked great, the prototype
          was complete!
        </p>
        <video autoplay controls muted loop width="320">
          <source src="/resources/videos/demo.mp4" type="video/mp4" />
          <source src="/resources/videos/demo.webm" type="video/webm" />
        </video>
        <h2>Thoughts and future development</h2>
        <p>
          This project was definitely a success and is something Ive found
          myself using almost daily without even thinking about it, that's not
          to say there isn't improvements I want to make. For one this only
          works on Linux at the moment, a Windows version would definitely be
          welcome. Another issue i've ran into is the MXChip losing connection
          to the Wi-FI, I believe this is an issue of the Wi-Fi signal being
          rather weak behind my monitor, a way to help mitigate this issue would
          be setting up a MQTT
          <a
            href="https://www.hivemq.com/blog/mqtt-essentials-part-9-last-will-and-testament/"
            >last will and testament</a
          >
          for when the MXChip loses connection, I could then have my phone send
          me a notification telling me to reset the MXChip. Overall I am very
          happy with this project and if you have an MXChip or Arduino with an
          accelerometer handy I would recommend building this project yourself!
        </p>
      </div>
      <div id="disqus_thread"></div>
      <script>
        (function () {
          // DON'T EDIT BELOW THIS LINEx
          var d = document,
            s = d.createElement("script");
          s.src = "https://joepitts-co-uk.disqus.com/embed.js";
          s.setAttribute("data-timestamp", +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript
        >Please enable JavaScript to view the
        <a href="https://disqus.com/?ref_noscript"
          >comments powered by Disqus.</a
        ></noscript
      >
    </div>

    <div class="footer">
      <p align="center">
        <a href="https://linkedin.com/in/JoePittsy">LinkedIn</a>&nbsp;&nbsp;
        <a href="https://twitter.com/JoePittsy">Twitter</a>&nbsp;&nbsp;<a
          href="https://instagram.com/JoePittsy"
          >Instagram</a
        >&nbsp;&nbsp;<a href="https://github.com/Pittsy24">GitHub</a>
      </p>
      <p id="copyright">Copyright © 2018-2020 Joe Pitts</p>
    </div>
    <script defer>
      (function () {
        new ClipboardJS("#rotCopy, #mosCopy, #pyCopy");
      })();
    </script>
  </body>
</html>
