<!DOCTYPE html>
<html lang="en-gb">
  <head>
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "TechArticle",
        "headline": "Guide for using WS2812B LED Strips with MXChip",
        "datePublished": "2020-08-20"
        "author": {
          "@type": "Person",
          "name": "Joe Pitts",
          "additionalName": "David",
          "affiliation": "University of Lincoln",
          "jobTitle": "Developer",
          "url": "https://JoePitts.co.uk",
          "sameAs": [
            "https://www.facebook.com/Joe.Pittsy",
            "https://www.linkedin.com/in/JoePittsy",
            "https://twitter.com/JoePittsy",
            "https://www.instagram.com/JoePittsy/",
            "https://github.com/Pittsy24"
          ],
          "image": "https://JoePitts.co.uk/resources/images/led.jpg",
          "description": "Guide for using WS2812B LED Strips with MXChip"
        }
      }
    </script>

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@JoePittsy" />
    <meta
      name="twitter:description"
      content="This guide will walk you through how to connect and control a WS2812B
      individually addressable RGB LED strip with the MXChip."
      name="description"
    />
    <meta
      name="twitter:title"
      content="Joe Pitts | Guide for using WS2812B LED Strips with MXChip"
    />
    <meta name="twitter:creator" content="@JoePittsy" />
    <meta
      property="og:image"
      content="https://joepitts.co.uk/resources/images/led.jpg"
    />

    <meta property="og:title" content="Guide for using WS2812B LED Strips with MXChip" />
    <meta
      property="og:description"
      content="This guide will walk you through how to connect and control a WS2812B
      individually addressable RGB LED strip with the MXChip."
    />
    <meta
      property="og:url"
      content="https://joepitts.co.uk/blog/guide-for-using-ws2812b-led-strips-with-mxchip.html"
    />
    <meta name="author" content="Joe Pitts" />

    <meta
      name="twitter:image"
      content="https://joepitts.co.uk/resources/images/led.jpg"
    />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-114382787-2"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-114382787-2");
    </script>
    <script src="/js/darkMode.js" type="text/javascript"></script>
    <script src="/js/clipboard.min.js"></script>
    <link
      href="/resources/apple-touch-icon.png"
      rel="apple-touch-icon"
      sizes="180x180"
    />
    <link
      href="/resources/favicon-32x32.png"
      rel="icon"
      sizes="32x32"
      type="image/png"
    />
    <link
      href="/resources/favicon-16x16.png"
      rel="icon"
      sizes="16x16"
      type="image/png"
    />
    <link href="/resources/site.webmanifest" rel="manifest" />
    <link href="/resources/safari-pinned-tab.svg" rel="mask-icon" />
    <meta content="#da532c" name="msapplication-TileColor" />
    <meta content="#ffffff" name="theme-color" />
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Joe Pitts | Guide for using WS2812B LED Strips with MXChip</title>
    <link href="/style.css" rel="stylesheet" type="text/css" />
    <meta
      content="This guide will walk you through how to connect and control a WS2812B
      individually addressable RGB LED strip with the MXChip."
      name="description"
    />
    <meta lang="en-gb" />
  </head>

  <body link="black" style="height: auto;">
    <div class="content" id="content">
      <header>
        <div id="containter">
          <div id="header">
            <img
              alt="Joe Pitts"
              id="logo"
              src="/resources/JoePitts.jpg"
              title="Joe Pitts"
              width="10%"
            />
            <a href="/" id="title">
              <p>Joe Pitts</p>
            </a>
            <div
              class="burger"
              onclick="document.getElementById('drop').click();"
            >
              <div></div>
              <div></div>
              <div></div>
            </div>
          </div>
        </div>
        <aside>
          <nav id="burger">
            <label
              class="toggle"
              for="drop"
              style="pointer-events: none;"
            ></label>
            <input id="drop" type="checkbox" />
            <ul class="menu" id="burger_menu">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/blog">Blog</a>
              </li>
              <li>
                <a href="/work.html">My Work</a>
              </li>
              <li>
                <a href="https://www.linkedin.com/in/joepittsy/">Linkedin</a>
              </li>
              <li>
                <a href="/instagram.html">Photography</a>
              </li>
              <li>
                <a class="toggleDark" onclick="toggleNightMode();">Dark Mode</a>
              </li>
            </ul>
          </nav>
          <nav id="normalMenu">
            <ul class="menu">
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a href="/blog">Blog</a>
              </li>
              <li>
                <a href="/work.html">My Work</a>
              </li>
              <li>
                <a href="https://www.linkedin.com/in/joepittsy/">Linkedin</a>
              </li>
              <li>
                <a href="/instagram.html">Photography</a>
              </li>
              <li>
                <a class="toggleDark" onclick="toggleNightMode();">Dark Mode</a>
              </li>
            </ul>
          </nav>
        </aside>
      </header>
      <hr />
      <div class="blogPost">
        <h1>Guide for using WS2812B LED Strips with MXChip</h1>
        <span id="readingTime">
          <date>20th of August 2020</date> |
          <p>6-7 minutes</p>
        </span>
        <a class="anchor" href="#introduction"
          ><h2 id="introduction">Introduction</h2></a
        >
        <p>
          This guide will walk you through how to connect and control a WS2812B
          individually addressable RGB LED strip to the MXChip.
        </p>

        <a class="anchor" href="#materials"
          ><h2 id="materials">Materials</h2></a
        >
        <h3>Breakout Board</h3>
        <p>
          Apart from the LED strip you will also need a breakout board for the
          MXChip so we can access all of the boards pins. The MXChip's
          'connecting finger' is the same as that on the BBC micro:bit which
          allows any breakout boards designed for the micro:bit compatible with
          the MXChip. In this guide i will be using the
          <a href="https://www.amazon.co.uk/gp/product/B06XTP23Z2/"
            >Kitronik edge connector breakout board</a
          >
          but other boards should be very similar, if not the same.
        </p>
        <h3>Jumper Wires</h3>
        <p>
          In order to connect the LED strip to the breakout board we need wires.
          Breadboard jumper wires are inexpensive and come in Male-Male,
          Male-Female and Female-Female, perfect for connecting everything up. I
          got 120 wires for £6 on
          <a
            href="https://www.amazon.co.uk/Elegoo-120pcs-Multicolored-Breadboard-arduino-colorful/dp/B01EV70C78"
            >Amazon.</a
          >
        </p>


        <a class="anchor" href="#wiring"><h2 id="wiring">Wiring</h2></a>

        <p>
          Now that we have all the materials needed its time to wire the LED
          strip up to the breakout board. The LED strip's connector should have
          three wires; Live, Ground and Data. On my LED strip the ground wire is
          coloured white and is on the left, this is followed by a green data
          wire in the middle which leaves a red wire on the right. Wire the Red
          live wire up the 3V output, the white wire to ground (0V) and the data
          wire to any of the data pins.
        </p>
        <picture id="wireImage">
          <source srcset="/resources/images/wire.webp" type="image/webp" />
          <source srcset="/resources/images/wire.jpg" type="image/jpeg" />
          <img src="/resources/images/wire.jpg" />
          <figcaption><small>It should look like this.</small></figcaption>
        </picture>
        <h3>Pin Mapping</h3>
        <p>
          As the breakout board we are using was designed for the micro:bit the
          pin numbers on the board and in software do not match up. In the
          bellow tables you can see the mapping from the Kitronik breakout board
          to the numbers that the MXChip will understand.
        </p>

        <div id="tableHolder">
          <table>
            <tr>
              <th>MXChip</th>
              <th>Breakout Board</th>
              <th>Code number</th>
            </tr>
            <tr>
              <td>Reset</td>
              <td>3</td>
              <td>N/A</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>0</td>
              <td>16</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>4</td>
              <td>5</td>
            </tr>
            <tr>
              <td>A Button</td>
              <td>5</td>
              <td>4</td>
            </tr>
            <tr>
              <td>Red LED</td>
              <td>6</td>
              <td>20</td>
            </tr>
            <tr>
              <td>Green LED</td>
              <td>7</td>
              <td>19</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>1</td>
              <td>22</td>
            </tr>
            <tr>
              <td>User LED</td>
              <td>8</td>
              <td>45</td>
            </tr>
            <tr>
              <td>IR LED</td>
              <td>9</td>
              <td>26</td>
            </tr>
            <tr>
              <td>Blue LED</td>
              <td>10</td>
              <td>39</td>
            </tr>
            <tr>
              <td>B Button</td>
              <td>11</td>
              <td>10</td>
            </tr>
          </table>
          <table>
            <tr>
              <th>MXChip</th>
              <th>Breakout Board</th>
              <th>Code number</th>
            </tr>
            <tr>
              <td>WiFi LED</td>
              <td>12</td>
              <td>18</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>2</td>
              <td>23</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>13</td>
              <td>29</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>14</td>
              <td>30</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>15</td>
              <td>31</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>15</td>
              <td>31</td>
            </tr>
            <tr>
              <td>Pin</td>
              <td>16</td>
              <td>38</td>
            </tr>
            <tr>
              <td>3.V</td>
              <td>3V</td>
              <td>N/A</td>
            </tr>
            <tr>
              <td>I2C</td>
              <td>19</td>
              <td>24</td>
            </tr>
            <tr>
              <td>I2C</td>
              <td>20</td>
              <td>25</td>
            </tr>
            <tr>
              <td>GND</td>
              <td>0V</td>
              <td>N/A</td>
            </tr>
          </table>
        </div>
        <p></p>
        <a class="anchor" href="#code"><h2 id="code">The Code</h2></a>
        <p>
          The first thing you will need is the header and cpp files to drive the
          LED strip. These were written by microsoft and provide some nice
          helper functions and some test routines to light up the LEDs. These
          files can be downloaded at the bottom of this guide in the
          <a href="#files">Files section.</a>
        </p>

        <p>
          Once those files have been downloaded and extracted into your
          workspace we can finally light the LED strip up!. The code provided
          below will run the strip through three different programmes, be sure
          the change NUMBER_OF_LED and LED_PIN to the correct values for your
          setup.
        </p>
        <div class="codeSnippet">
          <div class="double-val-label">
            <span class="cpp">C++</span>
            <span data-clipboard-target="#getRot" id="rotCopy">Copy</span>
          </div>
          <pre><div style="color: #383a42;/*! background-color: #fafafa; */font-family: 'Droid Sans Mono', 'monospace', monospace, 'Droid Sans Fallback';font-weight: normal;font-size: 14px;line-height: 19px;white-space: pre;"><div><span style="color: #a626a4;">#include</span><span style="color: #383a42;"> </span><span style="color: #50a14f;">"neopixel.h"</span></div><br><div><span style="color: #a626a4;">#define</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">NUMBER_OF_LED</span><span style="color: #383a42;"> </span><span style="color: #986801;">72</span><span style="color: #a0a1a7;font-style: italic;"> // This is the number of LEDs in your strip</span></div><div><span style="color: #a626a4;">#define</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">LED_PIN</span><span style="color: #383a42;"> </span><span style="color: #986801;">16</span><span style="color: #a0a1a7;font-style: italic;"> // This is the pin you plugged the data wire into</span></div><br><div><span style="color: #a626a4;">static</span><span style="color: #383a42;"> NeoPixel </span><span style="color: #a626a4;">*</span><span style="color: #383a42;">neopixel </span><span style="color: #a626a4;">=</span><span style="color: #383a42;"> </span><span style="color: #986801;">NULL</span><span style="color: #383a42;">;</span></div><div><span style="color: #a626a4;">static</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">int</span><span style="color: #383a42;"> test </span><span style="color: #a626a4;">=</span><span style="color: #383a42;"> </span><span style="color: #986801;">0</span><span style="color: #383a42;">;</span></div><div><span style="color: #a626a4;">static</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">bool</span><span style="color: #383a42;"> runTest </span><span style="color: #a626a4;">=</span><span style="color: #383a42;"> </span><span style="color: #986801;">false</span><span style="color: #383a42;">;</span></div><br><div><span style="color: #a626a4;">void</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">setup</span><span style="color: #383a42;">(){</span></div><div><span style="color: #383a42;">    neopixel </span><span style="color: #a626a4;">=</span><span style="color: #383a42;"> </span><span style="color: #a626a4;">new</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">NeoPixel</span><span style="color: #383a42;">(LED_PIN, NUMBER_OF_LED);</span></div><div><span style="color: #383a42;">    runTest </span><span style="color: #a626a4;">=</span><span style="color: #383a42;"> </span><span style="color: #e45649;">neopixel</span><span style="color: #383a42;">-&gt;</span><span style="color: #4078f2;">init</span><span style="color: #383a42;">();</span></div><div><span style="color: #383a42;">}</span></div><br><div><span style="color: #a626a4;">void</span><span style="color: #383a42;"> </span><span style="color: #4078f2;">loop</span><span style="color: #383a42;">(){</span></div><div><span style="color: #383a42;"><br></span></div><div><span style="color: #383a42;">    </span><span style="color: #a626a4;">if</span><span style="color: #383a42;"> (runTest){</span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">switch</span><span style="color: #383a42;"> (test </span><span style="color: #a626a4;">%</span><span style="color: #383a42;"> </span><span style="color: #986801;">3</span><span style="color: #383a42;">){</span></div><div><span style="color: #383a42;"><br></span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">case</span><span style="color: #383a42;"> </span><span style="color: #986801;">0</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            </span><span style="color: #e45649;">Serial</span><span style="color: #383a42;">.</span><span style="color: #4078f2;">println</span><span style="color: #383a42;">(</span><span style="color: #50a14f;">"Rainbow..."</span><span style="color: #383a42;">);</span></div><div><span style="color: #383a42;">            </span><span style="color: #e45649;">neopixel</span><span style="color: #383a42;">-&gt;</span><span style="color: #4078f2;">showRainbowCycle</span><span style="color: #383a42;">(</span><span style="color: #986801;">60</span><span style="color: #383a42;">, </span><span style="color: #986801;">25</span><span style="color: #383a42;">, </span><span style="color: #986801;">20</span><span style="color: #383a42;">, </span><span style="color: #986801;">200</span><span style="color: #383a42;">);</span></div><div><span style="color: #383a42;">            </span><span style="color: #e45649;">neopixel</span><span style="color: #383a42;">-&gt;</span><span style="color: #4078f2;">showColor</span><span style="color: #383a42;">(</span><span style="color: #986801;">0</span><span style="color: #383a42;">, </span><span style="color: #986801;">0</span><span style="color: #383a42;">, </span><span style="color: #986801;">0</span><span style="color: #383a42;">);</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">break</span><span style="color: #383a42;">;</span></div><div><span style="color: #383a42;"><br></span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">case</span><span style="color: #383a42;"> </span><span style="color: #986801;">1</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            </span><span style="color: #e45649;">Serial</span><span style="color: #383a42;">.</span><span style="color: #4078f2;">println</span><span style="color: #383a42;">(</span><span style="color: #50a14f;">"Theatre-style crawling lights..."</span><span style="color: #383a42;">);</span></div><div><span style="color: #383a42;">            </span><span style="color: #e45649;">neopixel</span><span style="color: #383a42;">-&gt;</span><span style="color: #4078f2;">showTheaterChase</span><span style="color: #383a42;">(</span><span style="color: #986801;">236</span><span style="color: #383a42;">, </span><span style="color: #986801;">19</span><span style="color: #383a42;">, </span><span style="color: #986801;">122</span><span style="color: #383a42;">, </span><span style="color: #986801;">500</span><span style="color: #383a42;">);</span></div><div><span style="color: #383a42;">            </span><span style="color: #e45649;">neopixel</span><span style="color: #383a42;">-&gt;</span><span style="color: #4078f2;">showColor</span><span style="color: #383a42;">(</span><span style="color: #986801;">0</span><span style="color: #383a42;">, </span><span style="color: #986801;">0</span><span style="color: #383a42;">, </span><span style="color: #986801;">0</span><span style="color: #383a42;">);</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">break</span><span style="color: #383a42;">;</span></div><div><span style="color: #383a42;"><br></span></div><div><span style="color: #383a42;">        </span><span style="color: #a626a4;">case</span><span style="color: #383a42;"> </span><span style="color: #986801;">2</span><span style="color: #383a42;">:</span></div><div><span style="color: #383a42;">            </span><span style="color: #e45649;">Serial</span><span style="color: #383a42;">.</span><span style="color: #4078f2;">println</span><span style="color: #383a42;">(</span><span style="color: #50a14f;">"Detonate..."</span><span style="color: #383a42;">);</span></div><div><span style="color: #383a42;">            </span><span style="color: #e45649;">neopixel</span><span style="color: #383a42;">-&gt;</span><span style="color: #4078f2;">showDetonate</span><span style="color: #383a42;">(</span><span style="color: #986801;">236</span><span style="color: #383a42;">, </span><span style="color: #986801;">19</span><span style="color: #383a42;">, </span><span style="color: #986801;">122</span><span style="color: #383a42;">, </span><span style="color: #986801;">800</span><span style="color: #383a42;">);</span></div><div><span style="color: #383a42;">            </span><span style="color: #e45649;">neopixel</span><span style="color: #383a42;">-&gt;</span><span style="color: #4078f2;">showColor</span><span style="color: #383a42;">(</span><span style="color: #986801;">0</span><span style="color: #383a42;">, </span><span style="color: #986801;">0</span><span style="color: #383a42;">, </span><span style="color: #986801;">0</span><span style="color: #383a42;">);</span></div><div><span style="color: #383a42;">            </span><span style="color: #a626a4;">break</span><span style="color: #383a42;">;</span></div><div><span style="color: #383a42;"><br></span></div><div><span style="color: #383a42;">        }</span></div><div><span style="color: #383a42;">        test</span><span style="color: #a626a4;">++</span><span style="color: #383a42;">;</span></div><div><span style="color: #383a42;">    }</span></div><div><span style="color: #383a42;">    </span><span style="color: #4078f2;">wait_ms</span><span style="color: #383a42;">(</span><span style="color: #986801;">2000</span><span style="color: #383a42;">);</span></div><div><span style="color: #383a42;">}</span></div></div></pre>
        </div>
        <p>
          From here you can create your own animations and more using the
          neopixel->showColor() and neopixel->setColor() commands that allow you
          to set the strip and individual LED's colours respectively.
        </p>

        <a class="anchor" href="#files"><h2 id="files">Files</h2></a>

        <div class="download">
          <p><a href="/resources/files/driver.zip">Driver.zip</a> <small>The header and cpp needed to drive the LED strip</small></p>
          <p class="download__instructions">
            <small class="download__properties">2.8 <abbr title="Kilobyte">kB</abbr></small>
          </p>
        </div>

        <div class="download">
          <p><a href="/resources/files/Example_Project.zip">Example_Project.zip</a> <small>A ready to flash project with the test script.</small></p>
          <p class="download__instructions">
            <small class="download__properties">6.4 <abbr title="Kilobyte">kB</abbr></small>
          </p>
        </div>
      </div>
      <p></p>
      <div id="disqus_thread"></div>
      <script>
        (function () {
          // DON'T EDIT BELOW THIS LINEx
          var d = document,
            s = d.createElement("script");
          s.src = "https://joepitts-co-uk.disqus.com/embed.js";
          s.setAttribute("data-timestamp", +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
      <noscript
        >Please enable JavaScript to view the
        <a href="https://disqus.com/?ref_noscript"
          >comments powered by Disqus.</a
        ></noscript
      >
    </div>

    <div class="footer">
      <p align="center">
        <a href="https://linkedin.com/in/JoePittsy">LinkedIn</a>&nbsp;&nbsp;
        <a href="https://twitter.com/JoePittsy">Twitter</a>&nbsp;&nbsp;<a
          href="https://instagram.com/JoePittsy"
          >Instagram</a
        >&nbsp;&nbsp;<a href="https://github.com/Pittsy24">GitHub</a>
      </p>
      <p id="copyright">Copyright © 2018-2020 Joe Pitts</p>
    </div>
    <script defer>
      (function () {
        new ClipboardJS("#rotCopy, #mosCopy, #pyCopy");
      })();
    </script>
  </body>
</html>
